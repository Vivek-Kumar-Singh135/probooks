(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,a){e.exports=a(32)},23:function(e,t,a){},30:function(e,t,a){},32:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),c=a(13),r=a.n(c),l=a(16),s=a(4),i=a(6),u=a(0),m=function(){return o.a.createElement("div",{className:"list-books-title"},o.a.createElement("h1",null,"proBook"))},d=a(9),b="https://reactnd-books-api.udacity.com",f=localStorage.token;f||(f=localStorage.token=Math.random().toString(36).substr(-8));var h={Accept:"application/json",Authorization:f},k=function(e){return fetch("".concat(b,"/search"),{method:"POST",headers:Object(d.a)({},h,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})},E=(a(23),function(e){var t=e.book,a=e.changeBookShelf;return o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(t.imageLinks.thumbnail,")")}}),o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{defaultValue:t.shelf?t.shelf:"none",onChange:function(e){return a(t,e.target.value)}},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"Reading"),o.a.createElement("option",{value:"wantToRead"},"Like"),o.a.createElement("option",{value:"read"},"Dislike"),o.a.createElement("option",{value:"none"},"Delete")))),o.a.createElement("div",{className:"book-title"},t.title),o.a.createElement("div",{className:"book-authors"},t.publisher))}),v=function(e){var t=e.books,a=e.title,n=e.updateBookShelf;return o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},a),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},t.map(function(e){return o.a.createElement("li",{key:e.id},o.a.createElement(E,{book:e,changeBookShelf:n}))}))))},p=function(e){var t=e.books,a=e.updateBookShelf,n=t.filter(function(e){return"currentlyReading"===e.shelf}),c=t.filter(function(e){return"wantToRead"===e.shelf}),r=t.filter(function(e){return"read"===e.shelf});return o.a.createElement("div",null,o.a.createElement(v,{title:"Reading",books:n,updateBookShelf:a}),o.a.createElement(v,{title:"Like",books:c,updateBookShelf:a}),o.a.createElement(v,{title:"Dislike",books:r,updateBookShelf:a}))},g=function(e){var t=e.bookRecord;return o.a.createElement("div",{className:"book-record-container"},o.a.createElement("div",{className:"book-record"},o.a.createElement("div",null,"Books Read : ",t[0]),o.a.createElement("div",null,"Books Liked : ",t[1]),o.a.createElement("div",null,"Books Disliked : ",t[2]),o.a.createElement("div",null,"Books Deleted : ",t[3])))},j=a(33);var N=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(new Map),f=Object(s.a)(r,2),v=f[0],N=f[1],O=Object(n.useState)(""),S=Object(s.a)(O,2),y=S[0],B=S[1],w=function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),o=a[0],c=a[1],r=Object(j.a)(e,500),l=Object(s.a)(r,1)[0];return Object(n.useEffect)(function(){var e=!0;return l&&k(l).then(function(t){t.error?c([]):e&&c(t)}),function(){e=!1,c([])}},[l]),[o,c]}(y),R=Object(s.a)(w,2),T=R[0],C=(R[1],Object(n.useState)([])),D=Object(s.a)(C,2),A=D[0],J=D[1],L=Object(n.useState)([2,2,3,0]),M=Object(s.a)(L,2),x=M[0],I=M[1];Object(n.useEffect)(function(){fetch("".concat(b,"/books"),{headers:h}).then(function(e){return console.log(e),e.json()}).then(function(e){return e.books}).then(function(e){c(e),N(P(e))})},[]),Object(n.useEffect)(function(){var e=T.map(function(e){return v.has(e.id)?v.get(e.id):e});J(e)},[T]);var P=function(e){var t=new Map;return e.map(function(e){return t.set(e.id,e)}),t},q=function(e,t){var n=Object(l.a)(x);"none"===t?n[3]=n[3]+1:"currentlyReading"===t?n[0]=n[0]+1:"wantToRead"===t?n[1]=n[1]+1:"read"===t&&(n[2]=n[2]+1),I(n);var o=a.map(function(a){return a.id===e.id?(e.shelf=t,e):a});v.has(e.id)||(e.shelf=t,o.push(e)),c(o),function(e,t){fetch("".concat(b,"/books/").concat(e.id),{method:"PUT",headers:Object(d.a)({},h,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})}(e,t)};return o.a.createElement("div",{className:"app"},o.a.createElement(i.a,null,o.a.createElement(u.c,null,o.a.createElement(u.a,{path:"/search"},o.a.createElement("div",{className:"search-books"},o.a.createElement("div",{className:"search-books-bar"},o.a.createElement(i.b,{to:"/"},o.a.createElement("button",{className:"close-search"},"Close")),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{type:"text",placeholder:"Search by title or author",value:y,onChange:function(e){return B(e.target.value)}}))),o.a.createElement("div",{className:"search-books-results"},o.a.createElement("h2",null,T.length," books found"),o.a.createElement("ol",{className:"books-grid"},A.map(function(e){return o.a.createElement("li",{key:e.id},o.a.createElement(E,{book:e,changeBookShelf:q}))}))))),o.a.createElement(u.a,{path:"/"},o.a.createElement("div",{className:"list-books"},console.log("SEARCH",T),o.a.createElement(m,null),o.a.createElement("div",{className:"list-books-content"},o.a.createElement(p,{books:a,updateBookShelf:q}),o.a.createElement(g,{bookRecord:x})),o.a.createElement("div",{className:"open-search"},o.a.createElement(i.b,{to:"/search"},o.a.createElement("button",null,"Add a book"))),o.a.createElement("div",null))))))};a(30);r.a.render(o.a.createElement(N,null),document.getElementById("root"))}},[[18,2,1]]]);
//# sourceMappingURL=main.0c6576f5.chunk.js.map